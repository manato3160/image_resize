# Vercelのログ確認方法

## ログを確認する手順

### 1. Vercelダッシュボードでログを確認

1. **Vercelダッシュボードにアクセス**
   - https://vercel.com/dashboard にアクセス
   - プロジェクト「image-resize」を選択

2. **Functionsタブを開く**
   - プロジェクトページの上部タブから「Functions」をクリック
   - または、左サイドバーから「Functions」を選択

3. **特定のFunctionを選択**
   - `api/process-multiple` または `api/process` をクリック
   - 各Functionのログが表示されます

4. **ログの確認**
   - 「Logs」タブで実行時のログを確認
   - 「Invocations」タブでリクエスト履歴を確認

### 2. リクエストを送信してログを生成

現在、ログが表示されていない場合は、実際にリクエストを送信する必要があります：

1. **アプリケーションにアクセス**
   - デプロイされたURL（例: `https://image-resize-lac.vercel.app`）にアクセス

2. **画像をアップロードして処理を実行**
   - 画像を選択して「画像を処理」ボタンをクリック
   - これにより、Python Functionが呼び出され、ログが生成されます

3. **ログを確認**
   - リクエスト送信後、Vercelダッシュボードの「Functions」タブでログを確認
   - 最新のログが表示されるはずです

### 3. ログの見方

追加したデバッグログでは、以下の情報が出力されます：

```
リクエストオブジェクトのキー: ['method', 'body', 'headers', ...]
リクエストオブジェクトの内容: {...}
複数画像処理リクエスト受信: method=POST, body_type=<class 'str'>, body_exists=True
```

これらのログから、以下を確認できます：
- リクエストオブジェクトに含まれるキー名
- 実際のリクエストの内容
- 取得できたメソッド名

### 4. ログが表示されない場合

1. **時間範囲を確認**
   - ログ画面の「Timeline」フィルターで時間範囲を確認
   - 「Last 30 minutes」以外の範囲（例: 「Last 24 hours」）に変更してみる

2. **フィルターをリセット**
   - 「Reset」ボタンをクリックしてフィルターをリセット

3. **Liveモードを有効化**
   - ログ画面の右上の「Live」トグルをONにする
   - リアルタイムでログが表示されます

4. **リクエストを再送信**
   - アプリケーションで再度画像処理を実行
   - ログが生成されることを確認

### 5. エラーログの確認

405エラーが発生している場合、以下のログが出力されます：

```
許可されていないメソッド: <取得できたメソッド名>
```

このログから、実際に取得できたメソッド名を確認できます。

また、405エラーのレスポンスには以下の情報が含まれます：
```json
{
  "success": false,
  "error": "Method not allowed: <メソッド名>",
  "received_method": "<メソッド名>",
  "request_keys": ["key1", "key2", ...]
}
```

ブラウザの開発者ツール（F12）の「Network」タブで、405エラーのレスポンスボディを確認することもできます。

## トラブルシューティング

### ログが全く表示されない場合

1. **Functionが正しくデプロイされているか確認**
   - 「Functions」タブで、`api/process-multiple.py` と `api/process.py` が表示されているか確認

2. **ビルドログを確認**
   - 「Deployments」タブで最新のデプロイメントを選択
   - 「Build Logs」でエラーがないか確認

3. **リクエストがFunctionに到達しているか確認**
   - ブラウザの開発者ツール（F12）の「Network」タブでリクエストを確認
   - リクエストが送信されているか、エラーレスポンスが返ってきているか確認

